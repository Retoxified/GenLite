// ==UserScript==
// @name         GenLite
// @namespace    GenLite
// @version      0.1.13
// @description  try to take over the world!
// @author       https://github.com/Retoxified/GenLite/blob/main/CREDITS.md
// @match        https://play.genfanad.com/play/
// @icon         https://www.google.com/s2/favicons?sz=64&domain=genfanad.com
// @grant        none
// ==/UserScript==

(()=>{var t={65:(t,e,i)=>{"use strict";var n=i(381),o=i(365),r=i(205),a=i(845);function s(t,e,i,n){return function(i,o,r){var a=t(t(e(o[1],r[0]),e(-r[1],o[0])),t(e(i[1],o[0]),e(-o[1],i[0]))),s=t(e(i[1],r[0]),e(-r[1],i[0])),l=n(a,s);return l[l.length-1]}}function l(t,e,i,n){return function(o,r,a,s){var l=t(t(i(t(e(a[1],s[0]),e(-s[1],a[0])),r[2]),t(i(t(e(r[1],s[0]),e(-s[1],r[0])),-a[2]),i(t(e(r[1],a[0]),e(-a[1],r[0])),s[2]))),t(i(t(e(r[1],s[0]),e(-s[1],r[0])),o[2]),t(i(t(e(o[1],s[0]),e(-s[1],o[0])),-r[2]),i(t(e(o[1],r[0]),e(-r[1],o[0])),s[2])))),c=t(t(i(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]),t(i(t(e(o[1],s[0]),e(-s[1],o[0])),-a[2]),i(t(e(o[1],a[0]),e(-a[1],o[0])),s[2]))),t(i(t(e(r[1],a[0]),e(-a[1],r[0])),o[2]),t(i(t(e(o[1],a[0]),e(-a[1],o[0])),-r[2]),i(t(e(o[1],r[0]),e(-r[1],o[0])),a[2])))),u=n(l,c);return u[u.length-1]}}function c(t,e,i,n){return function(o,r,a,s,l){var c=t(t(t(i(t(i(t(e(s[1],l[0]),e(-l[1],s[0])),a[2]),t(i(t(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),i(t(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),r[3]),t(i(t(i(t(e(s[1],l[0]),e(-l[1],s[0])),r[2]),t(i(t(e(r[1],l[0]),e(-l[1],r[0])),-s[2]),i(t(e(r[1],s[0]),e(-s[1],r[0])),l[2]))),-a[3]),i(t(i(t(e(a[1],l[0]),e(-l[1],a[0])),r[2]),t(i(t(e(r[1],l[0]),e(-l[1],r[0])),-a[2]),i(t(e(r[1],a[0]),e(-a[1],r[0])),l[2]))),s[3]))),t(i(t(i(t(e(a[1],s[0]),e(-s[1],a[0])),r[2]),t(i(t(e(r[1],s[0]),e(-s[1],r[0])),-a[2]),i(t(e(r[1],a[0]),e(-a[1],r[0])),s[2]))),-l[3]),t(i(t(i(t(e(s[1],l[0]),e(-l[1],s[0])),r[2]),t(i(t(e(r[1],l[0]),e(-l[1],r[0])),-s[2]),i(t(e(r[1],s[0]),e(-s[1],r[0])),l[2]))),o[3]),i(t(i(t(e(s[1],l[0]),e(-l[1],s[0])),o[2]),t(i(t(e(o[1],l[0]),e(-l[1],o[0])),-s[2]),i(t(e(o[1],s[0]),e(-s[1],o[0])),l[2]))),-r[3])))),t(t(i(t(i(t(e(r[1],l[0]),e(-l[1],r[0])),o[2]),t(i(t(e(o[1],l[0]),e(-l[1],o[0])),-r[2]),i(t(e(o[1],r[0]),e(-r[1],o[0])),l[2]))),s[3]),t(i(t(i(t(e(r[1],s[0]),e(-s[1],r[0])),o[2]),t(i(t(e(o[1],s[0]),e(-s[1],o[0])),-r[2]),i(t(e(o[1],r[0]),e(-r[1],o[0])),s[2]))),-l[3]),i(t(i(t(e(a[1],s[0]),e(-s[1],a[0])),r[2]),t(i(t(e(r[1],s[0]),e(-s[1],r[0])),-a[2]),i(t(e(r[1],a[0]),e(-a[1],r[0])),s[2]))),o[3]))),t(i(t(i(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]),t(i(t(e(o[1],s[0]),e(-s[1],o[0])),-a[2]),i(t(e(o[1],a[0]),e(-a[1],o[0])),s[2]))),-r[3]),t(i(t(i(t(e(r[1],s[0]),e(-s[1],r[0])),o[2]),t(i(t(e(o[1],s[0]),e(-s[1],o[0])),-r[2]),i(t(e(o[1],r[0]),e(-r[1],o[0])),s[2]))),a[3]),i(t(i(t(e(r[1],a[0]),e(-a[1],r[0])),o[2]),t(i(t(e(o[1],a[0]),e(-a[1],o[0])),-r[2]),i(t(e(o[1],r[0]),e(-r[1],o[0])),a[2]))),-s[3]))))),u=t(t(t(i(t(i(t(e(s[1],l[0]),e(-l[1],s[0])),a[2]),t(i(t(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),i(t(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),o[3]),i(t(i(t(e(s[1],l[0]),e(-l[1],s[0])),o[2]),t(i(t(e(o[1],l[0]),e(-l[1],o[0])),-s[2]),i(t(e(o[1],s[0]),e(-s[1],o[0])),l[2]))),-a[3])),t(i(t(i(t(e(a[1],l[0]),e(-l[1],a[0])),o[2]),t(i(t(e(o[1],l[0]),e(-l[1],o[0])),-a[2]),i(t(e(o[1],a[0]),e(-a[1],o[0])),l[2]))),s[3]),i(t(i(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]),t(i(t(e(o[1],s[0]),e(-s[1],o[0])),-a[2]),i(t(e(o[1],a[0]),e(-a[1],o[0])),s[2]))),-l[3]))),t(t(i(t(i(t(e(a[1],l[0]),e(-l[1],a[0])),r[2]),t(i(t(e(r[1],l[0]),e(-l[1],r[0])),-a[2]),i(t(e(r[1],a[0]),e(-a[1],r[0])),l[2]))),o[3]),i(t(i(t(e(a[1],l[0]),e(-l[1],a[0])),o[2]),t(i(t(e(o[1],l[0]),e(-l[1],o[0])),-a[2]),i(t(e(o[1],a[0]),e(-a[1],o[0])),l[2]))),-r[3])),t(i(t(i(t(e(r[1],l[0]),e(-l[1],r[0])),o[2]),t(i(t(e(o[1],l[0]),e(-l[1],o[0])),-r[2]),i(t(e(o[1],r[0]),e(-r[1],o[0])),l[2]))),a[3]),i(t(i(t(e(r[1],a[0]),e(-a[1],r[0])),o[2]),t(i(t(e(o[1],a[0]),e(-a[1],o[0])),-r[2]),i(t(e(o[1],r[0]),e(-r[1],o[0])),a[2]))),-l[3])))),h=n(c,u);return h[h.length-1]}}function u(t){return(3===t?s:4===t?l:c)(o,n,r,a)}var h=u(3),p=u(4),d=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,i){var n,o=(t[1]-i[1])*(e[0]-i[0]),r=(t[0]-i[0])*(e[1]-i[1]),a=o-r;if(o>0){if(r<=0)return a;n=o+r}else{if(!(o<0))return a;if(r>=0)return a;n=-(o+r)}var s=33306690738754716e-32*n;return a>=s||a<=-s?a:h(t,e,i)},function(t,e,i,n){var o=t[0]-n[0],r=e[0]-n[0],a=i[0]-n[0],s=t[1]-n[1],l=e[1]-n[1],c=i[1]-n[1],u=t[2]-n[2],h=e[2]-n[2],d=i[2]-n[2],f=r*c,m=a*l,y=a*s,v=o*c,g=o*l,b=r*s,w=u*(f-m)+h*(y-v)+d*(g-b),L=7771561172376103e-31*((Math.abs(f)+Math.abs(m))*Math.abs(u)+(Math.abs(y)+Math.abs(v))*Math.abs(h)+(Math.abs(g)+Math.abs(b))*Math.abs(d));return w>L||-w>L?w:p(t,e,i,n)}];function f(t){var e=d[t.length];return e||(e=d[t.length]=u(t.length)),e.apply(void 0,t)}function m(t,e,i,n,o,r,a){return function(e,i,s,l,c){switch(arguments.length){case 0:case 1:return 0;case 2:return n(e,i);case 3:return o(e,i,s);case 4:return r(e,i,s,l);case 5:return a(e,i,s,l,c)}for(var u=new Array(arguments.length),h=0;h<arguments.length;++h)u[h]=arguments[h];return t(u)}}!function(){for(;d.length<=5;)d.push(u(d.length));t.exports=m.apply(void 0,[f].concat(d));for(var e=0;e<=5;++e)t.exports[e]=d[e]}()},367:(t,e,i)=>{t.exports=function(t,e){for(var i=e[0],o=e[1],r=t.length,a=1,s=r,l=0,c=r-1;l<s;c=l++){var u=t[l],h=t[c],p=u[1],d=h[1];if(d<p){if(d<o&&o<p){if(0===(f=n(u,h,e)))return 0;a^=0<f|0}else if(o===p){if(p<t[(l+1)%r][1]){if(0===(f=n(u,h,e)))return 0;a^=0<f|0}}}else if(p<d){if(p<o&&o<d){if(0===(f=n(u,h,e)))return 0;a^=f<0|0}else if(o===p){if(t[(l+1)%r][1]<p){var f;if(0===(f=n(u,h,e)))return 0;a^=f<0|0}}}else if(o===p){var m=Math.min(u[0],h[0]),y=Math.max(u[0],h[0]);if(0===l){for(;c>0;){var v=(c+r-1)%r;if((w=t[v])[1]!==o)break;var g=w[0];m=Math.min(m,g),y=Math.max(y,g),c=v}if(0===c)return m<=i&&i<=y?0:1;s=c+1}for(var b=t[(c+r-1)%r][1];l+1<s;){var w;if((w=t[l+1])[1]!==o)break;g=w[0];m=Math.min(m,g),y=Math.max(y,g),l+=1}if(m<=i&&i<=y)return 0;var L=t[(l+1)%r][1];i<m&&b<o!=L<o&&(a^=1)}}return 2*a-1};var n=i(65)},205:(t,e,i)=>{"use strict";var n=i(381),o=i(460);t.exports=function(t,e){var i=t.length;if(1===i){var r=n(t[0],e);return r[0]?r:[r[1]]}var a=new Array(2*i),s=[.1,.1],l=[.1,.1],c=0;n(t[0],e,s),s[0]&&(a[c++]=s[0]);for(var u=1;u<i;++u){n(t[u],e,l);var h=s[1];o(h,l[0],s),s[0]&&(a[c++]=s[0]);var p=l[1],d=s[1],f=p+d,m=d-(f-p);s[1]=f,m&&(a[c++]=m)}s[1]&&(a[c++]=s[1]);0===c&&(a[c++]=0);return a.length=c,a}},845:t=>{"use strict";t.exports=function(t,e){var i=0|t.length,n=0|e.length;if(1===i&&1===n)return function(t,e){var i=t+e,n=i-t,o=i-n,r=e-n,a=t-o,s=a+r;if(s)return[s,i];return[i]}(t[0],-e[0]);var o,r,a=new Array(i+n),s=0,l=0,c=0,u=Math.abs,h=t[l],p=u(h),d=-e[c],f=u(d);p<f?(r=h,(l+=1)<i&&(p=u(h=t[l]))):(r=d,(c+=1)<n&&(f=u(d=-e[c])));l<i&&p<f||c>=n?(o=h,(l+=1)<i&&(p=u(h=t[l]))):(o=d,(c+=1)<n&&(f=u(d=-e[c])));var m,y,v=o+r,g=v-o,b=r-g,w=b,L=v;for(;l<i&&c<n;)p<f?(o=h,(l+=1)<i&&(p=u(h=t[l]))):(o=d,(c+=1)<n&&(f=u(d=-e[c]))),(b=(r=w)-(g=(v=o+r)-o))&&(a[s++]=b),w=L-((m=L+v)-(y=m-L))+(v-y),L=m;for(;l<i;)(b=(r=w)-(g=(v=(o=h)+r)-o))&&(a[s++]=b),w=L-((m=L+v)-(y=m-L))+(v-y),L=m,(l+=1)<i&&(h=t[l]);for(;c<n;)(b=(r=w)-(g=(v=(o=d)+r)-o))&&(a[s++]=b),w=L-((m=L+v)-(y=m-L))+(v-y),L=m,(c+=1)<n&&(d=-e[c]);w&&(a[s++]=w);L&&(a[s++]=L);s||(a[s++]=0);return a.length=s,a}},365:t=>{"use strict";t.exports=function(t,e){var i=0|t.length,n=0|e.length;if(1===i&&1===n)return function(t,e){var i=t+e,n=i-t,o=i-n,r=e-n,a=t-o,s=a+r;if(s)return[s,i];return[i]}(t[0],e[0]);var o,r,a=new Array(i+n),s=0,l=0,c=0,u=Math.abs,h=t[l],p=u(h),d=e[c],f=u(d);p<f?(r=h,(l+=1)<i&&(p=u(h=t[l]))):(r=d,(c+=1)<n&&(f=u(d=e[c])));l<i&&p<f||c>=n?(o=h,(l+=1)<i&&(p=u(h=t[l]))):(o=d,(c+=1)<n&&(f=u(d=e[c])));var m,y,v=o+r,g=v-o,b=r-g,w=b,L=v;for(;l<i&&c<n;)p<f?(o=h,(l+=1)<i&&(p=u(h=t[l]))):(o=d,(c+=1)<n&&(f=u(d=e[c]))),(b=(r=w)-(g=(v=o+r)-o))&&(a[s++]=b),w=L-((m=L+v)-(y=m-L))+(v-y),L=m;for(;l<i;)(b=(r=w)-(g=(v=(o=h)+r)-o))&&(a[s++]=b),w=L-((m=L+v)-(y=m-L))+(v-y),L=m,(l+=1)<i&&(h=t[l]);for(;c<n;)(b=(r=w)-(g=(v=(o=d)+r)-o))&&(a[s++]=b),w=L-((m=L+v)-(y=m-L))+(v-y),L=m,(c+=1)<n&&(d=e[c]);w&&(a[s++]=w);L&&(a[s++]=L);s||(a[s++]=0);return a.length=s,a}},381:t=>{"use strict";t.exports=function(t,i,n){var o=t*i,r=e*t,a=r-(r-t),s=t-a,l=e*i,c=l-(l-i),u=i-c,h=s*u-(o-a*c-s*c-a*u);if(n)return n[0]=h,n[1]=o,n;return[h,o]};var e=+(Math.pow(2,27)+1)},460:t=>{"use strict";t.exports=function(t,e,i){var n=t+e,o=n-t,r=e-o,a=t-(n-o);if(i)return i[0]=a+r,i[1]=n,i;return[a+r,n]}},385:function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GenlitePluginLoader=void 0;var r=i(802),a=function(){function t(){this.plugins=[]}return t.prototype.addPlugin=function(t){return n(this,void 0,void 0,(function(){var e;return o(this,(function(i){switch(i.label){case 0:try{this.verifyPluginClassStructure(t)}catch(t){return console.error("[GenLitePluginLoader]: Error loading plugin:",t),console.error("[GenLitePluginLoader]: Plugin classes need to follow the given example structure",this.getExampleStructure()),[2,!1]}return[4,(e=new t).init()];case 1:return i.sent(),window[t.pluginName]=e,this.plugins.push(e),console.log("[GenLitePluginLoader]: Loaded plugin ".concat(t.pluginName)),[2,window[t.pluginName]]}}))}))},t.prototype.verifyPluginClassStructure=function(t){if(!t.prototype.init)throw new Error("Plugin class ".concat(t," does not define an init function."));if("function"!=typeof t.prototype.init)throw new Error("Plugin class ".concat(t,".init was not defined as a function"));if(!t.pluginName)throw new Error("Plugin class ".concat(t," does not define a pluginName"))},t.prototype.getExampleStructure=function(){return r.ExamplePlugin},t}();e.GenlitePluginLoader=a},669:function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GenLite=void 0;var r=i(385),a=function(){function t(){this.moduleList=[],this.pluginLoader=new r.GenlitePluginLoader}return t.prototype.init=function(){return n(this,void 0,void 0,(function(){return o(this,(function(t){return this.installHook(Camera.prototype,"update",this.hook_Camera_update,this),this.installHook(Network.prototype,"logoutOK",this.hook_Network_logoutOK,this),this.installHook(PhasedLoadingManager.prototype,"start_phase",this.hook_PhasedLoadingManager_start_phase,this),this.installHook(Network.prototype,"action",this.hook_Network_action,this),this.installHook(Network.prototype,"handle",this.hook_Network_handle,this),this.installHook(PlayerInfo.prototype,"updateXP",this.hook_PlayerInfo_updateXP,this),this.installHook(PlayerInfo.prototype,"updateTooltip",this.hook_PlayerInfo_updateTooltip,this),this.installHook(PlayerInfo.prototype,"updateSkills",this.hook_PlayerInfo_updateSkills,this),this.installHook(window,"initializeUI",this.hook_window_initializeUI,this),this.installHook(Game.prototype,"combatUpdate",this.hook_Game_combatUpdate,this),[2]}))}))},t.prototype.hook_Camera_update=function(){for(var t=0;t<this.moduleList.length;t++)"function"==typeof this.moduleList[t].update&&this.moduleList[t].update.apply(this.moduleList[t],arguments)},t.prototype.hook_Network_logoutOK=function(){for(var t=0;t<this.moduleList.length;t++)"function"==typeof this.moduleList[t].logoutOK&&this.moduleList[t].logoutOK.apply(this.moduleList[t],arguments)},t.prototype.hook_Network_action=function(){for(var t=0;t<this.moduleList.length;t++)"function"==typeof this.moduleList[t].action&&this.moduleList[t].action.apply(this.moduleList[t],arguments)},t.prototype.hook_Network_handle=function(){for(var t=0;t<this.moduleList.length;t++)"function"==typeof this.moduleList[t].handle&&this.moduleList[t].handle.apply(this.moduleList[t],arguments)},t.prototype.hook_PhasedLoadingManager_start_phase=function(t){if("game_loaded"===t)for(var e=0;e<this.moduleList.length;e++)"function"==typeof this.moduleList[e].loginOK&&this.moduleList[e].loginOK.apply(this.moduleList[e],arguments)},t.prototype.hook_PlayerInfo_updateXP=function(){for(var t=0;t<this.moduleList.length;t++)"function"==typeof this.moduleList[t].updateXP&&this.moduleList[t].updateXP.apply(this.moduleList[t],arguments)},t.prototype.hook_PlayerInfo_updateTooltip=function(){for(var t=0;t<this.moduleList.length;t++)"function"==typeof this.moduleList[t].updateTooltip&&this.moduleList[t].updateTooltip.apply(this.moduleList[t],arguments)},t.prototype.hook_PlayerInfo_updateSkills=function(){for(var t=0;t<this.moduleList.length;t++)"function"==typeof this.moduleList[t].updateSkills&&this.moduleList[t].updateSkills.apply(this.moduleList[t],arguments)},t.prototype.hook_window_initializeUI=function(){for(var t=0;t<this.moduleList.length;t++)"function"==typeof this.moduleList[t].initializeUI&&this.moduleList[t].initializeUI.apply(this.moduleList[t],arguments)},t.prototype.hook_Game_combatUpdate=function(){for(var t=0;t<this.moduleList.length;t++)"function"==typeof this.moduleList[t].combatUpdate&&this.moduleList[t].combatUpdate.apply(this.moduleList[t],arguments)},t.prototype.registerModule=function(t){this.moduleList[this.moduleList.length]=t},t.prototype.unregisterModule=function(t){for(var e=0;e<this.moduleList.length;e++)if(this.moduleList[e]===t){this.moduleList.splice(e,1);break}},t.prototype.installHook=function(t,e,i,n){var o;o=t[e],t[e]=function(){var t=o.apply(this,arguments);return void 0!==i&&i.apply(null!=n?n:this,arguments),t}},t.prototype.sendDataToServer=function(t,e){var i=new XMLHttpRequest;i.open("POST","https://nextgensoftware.nl/".concat(t,".php")),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.send(JSON.stringify(e))},t.pluginName="GenLite",t}();e.GenLite=a},802:function(t,e){"use strict";var i=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ExamplePlugin=void 0;var o=function(){function t(){}return t.prototype.init=function(){return i(this,void 0,void 0,(function(){return n(this,(function(t){return[2]}))}))},t.pluginName="My Plugin",t}();e.ExamplePlugin=o},400:function(t,e){"use strict";var i=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GenliteConfirmation=void 0;var o=function(){function t(){}return t.confirm=function(t){return i(this,void 0,void 0,(function(){return n(this,(function(e){return[2,window.confirm(t)]}))}))},t}();e.GenliteConfirmation=o},694:function(t,e){"use strict";var i=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GenLiteNotificationPlugin=void 0;var o=function(){function t(){}return t.prototype.init=function(){return i(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,this.askPermission()];case 1:return t.sent(),[2]}}))}))},t.prototype.askPermission=function(){return this.hasPermission()},t.prototype.notify=function(e,i,n){n||(n=t.defaultIcon),this.hasPermission().then((function(t){!0===t&&(new window.Notification(e,{body:i,icon:n}).onclick=function(){window.focus()})}))},t.prototype.hasPermission=function(){return new Promise((function(t){"Notification"in window?"granted"===window.Notification.permission?t(!0):window.Notification.requestPermission().then((function(e){t("granted"===e)})):t(!0)}))},t.pluginName="GenLiteNotificationPlugin",t.defaultIcon="https://www.google.com/s2/favicons?sz=64&domain=genfanad.com",t}();e.GenLiteNotificationPlugin=o},485:function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GenLiteSettingsPlugin=void 0;var r=i(400),a=function(){function t(){this.settings={}}return t.prototype.init=function(){return n(this,void 0,void 0,(function(){var t,e;return o(this,(function(i){return this.container=document.createElement("div"),this.container.id="new_ux-settings-modal__settings-box-1",this.container.className="new_ux-settings-modal__settings-box",(t=document.createElement("div")).className="new_ux-settings-modal__settings-row new_ux-settings-modal__settings-row--title",(e=document.createElement("span")).className="new_ux-settings-modal__setting-row-title__title-text",e.innerText="GenLite",t.appendChild(e),this.container.appendChild(t),document.getElementById("new_ux-settings-modal__inner-space").appendChild(this.container),[2]}))}))},t.prototype.add=function(t,e,i,a,s,l,c,u){var h=this;if(void 0===c&&(c=void 0),void 0===u&&(u=void 0),!(t in this.settings)){var p="GenLite."+t,d=localStorage.getItem(p);this.settings[t]=d?"checkbox"===a?"true"===d:d:e}var f=document.createElement("input");for(var m in f.type=a,u){var y=u[m];f.setAttribute(y[0],y[1])}"checkbox"===a?f.checked=this.settings[t]:f.value=this.settings[t],f.addEventListener("change",(function(e){return n(h,void 0,void 0,(function(){return o(this,(function(i){switch(i.label){case 0:return"checkbox"!==a?[3,3]:!0!==f.checked||void 0===c?[3,2]:[4,r.GenliteConfirmation.confirm(c)];case 1:if(!1===i.sent())return f.checked=!1,e.preventDefault(),[2];i.label=2;case 2:return this.settings[t]=f.checked,[3,4];case 3:this.settings[t]=f.value,i.label=4;case 4:return localStorage.setItem("GenLite."+t,this.settings[t]),s.call(l,this.settings[t]),[2]}}))}))}));var v=document.createElement("div"),g=document.createElement("label");return v.className="new_ux-settings-modal__settings-row",g.className="new_ux-settings-modal__setting-name",g.textContent=i,v.appendChild(g),v.appendChild(f),this.container.appendChild(v),this.settings[t]},t.pluginName="GenLiteSettingsPlugin",t}();e.GenLiteSettingsPlugin=a},607:function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(669),a=i(694),s=i(485),l=i(103),c=i(556),u=i(160),h=i(414),p=i(37),d=i(955),f=i(943),m=i(727),y=i(319),v=i(410);!function(){n(this,void 0,void 0,(function(){var t,e,i;return o(this,(function(n){switch(n.label){case 0:return[4,(t=new r.GenLite).init()];case 1:return n.sent(),window.genlite=t,e=t,[4,t.pluginLoader.addPlugin(a.GenLiteNotificationPlugin)];case 2:return e.notifications=n.sent(),i=t,[4,t.pluginLoader.addPlugin(s.GenLiteSettingsPlugin)];case 3:return i.settings=n.sent(),[4,t.pluginLoader.addPlugin(l.GenLiteCameraPlugin)];case 4:return n.sent(),[4,t.pluginLoader.addPlugin(h.GenLiteNPCHighlightPlugin)];case 5:return n.sent(),[4,t.pluginLoader.addPlugin(u.GenLiteItemHighlightPlugin)];case 6:return n.sent(),[4,t.pluginLoader.addPlugin(c.GenliteDropRecorderPlugin)];case 7:return n.sent(),[4,t.pluginLoader.addPlugin(d.GenLiteWikiDataCollectionPlugin)];case 8:return n.sent(),[4,t.pluginLoader.addPlugin(f.GenLiteXpCalculator)];case 9:return n.sent(),[4,t.pluginLoader.addPlugin(p.GenLiteRecipeRecorderPlugin)];case 10:return n.sent(),[4,t.pluginLoader.addPlugin(m.GenliteHitRecorder)];case 11:return n.sent(),[4,t.pluginLoader.addPlugin(y.GenliteMenuScaler)];case 12:return n.sent(),[4,t.pluginLoader.addPlugin(v.GenLiteLocationsPlugin)];case 13:return n.sent(),[2]}}))}))}()},103:function(t,e){"use strict";var i=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GenLiteCameraPlugin=void 0;var o=function(){function t(){this.unlockCamera=!1,this.hideRoofs=!1}return t.prototype.init=function(){return i(this,void 0,void 0,(function(){return n(this,(function(t){return window.genlite.registerModule(this),this.originalCameraMode=WorldManager.prototype.updatePlayerTile,this.unlockCamera=window.genlite.settings.add("Camera.UnlockCam",!0,"Unlock Camera","checkbox",this.handleUnlockCameraToggle,this),this.hideRoofs=window.genlite.settings.add("Camera.HideRoofs",!0,"Hide Roofs","checkbox",this.handleHideRoofToggle,this),[2]}))}))},t.prototype.handleUnlockCameraToggle=function(t){this.unlockCamera=t,this.setCameraMode()},t.prototype.handleHideRoofToggle=function(t){this.hideRoofs=t,this.setCameraMode()},t.prototype.loginOK=function(){this.setCameraMode()},t.prototype.setCameraMode=function(){void 0!==WORLDMANAGER&&(!0===this.hideRoofs?WORLDMANAGER.updatePlayerTile=this.noRoofCameraMode.bind(WORLDMANAGER):WORLDMANAGER.updatePlayerTile=this.originalCameraMode.bind(WORLDMANAGER),WORLDMANAGER.updatePlayerTile.call(WORLDMANAGER)),void 0!==GRAPHICS&&(!0===this.unlockCamera?(GRAPHICS.camera.controls.maxDistance=15,GRAPHICS.camera.controls.minPolarAngle=.35,GRAPHICS.camera.controls.maxPolarAngle=1.4):(GRAPHICS.camera.controls.maxDistance=8,GRAPHICS.camera.controls.minPolarAngle=THREE.Math.degToRad(45),GRAPHICS.camera.controls.maxPolarAngle=THREE.Math.degToRad(57)))},t.prototype.noRoofCameraMode=function(){var t=this,e=t.loadedSegments[t.segmentKey].getTile(t.segment.lx,t.segment.ly);if(!e)throw"Invalid location: ".concat(t.segmentKey," ").concat(t.segment.lx,", ").concat(t.segment.ly);for(var i in t.indoors=!0,t.loadedSegments)t.loadedSegments[i].setIndoorStatus(t.indoors);if(e.pvp){var n=document.getElementById("pvp_indicator");n.style.display="block",n.innerText="PvP Level: YES",t.pvp_zone=!0}else document.getElementById("pvp_indicator").style.display="none",t.pvp_zone=!1;MUSIC_PLAYER.setNextTrack(e.music)},t.pluginName="GenLiteCameraPlugin",t}();e.GenLiteCameraPlugin=o},556:function(t,e){"use strict";var i=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GenliteDropRecorderPlugin=void 0;var o=function(){function t(){this.isPluginEnabled=!1,this.submitItemsToServer=!1,this.monsterData={Monster_Name:void 0,Monster_Level:0,hp:0,layer:void 0,x:0,y:0,Drops:[],vitXP:0,atkXP:0,strXP:0,defXP:0,playerCL:0,meleeTot:0},this.curCombat=void 0,this.curEnemy={id:void 0},this.enemyDead=0,this.objectSpawns=[],this.dropTable={}}return t.prototype.init=function(){return i(this,void 0,void 0,(function(){var t;return n(this,(function(e){return window.genlite.registerModule(this),t=localStorage.getItem("genliteDropTable"),this.dropTable=null==t?{}:JSON.parse(t),this.isPluginEnabled=window.genlite.settings.add("DropRecorder.Enable",!0,"Drop Recorder","checkbox",this.handlePluginEnableDisable,this),this.submitItemsToServer=window.genlite.settings.add("DropRecorder.SubmitToServer",!1,"Send Drops to Server(REMOTE SERVER)","checkbox",this.handleSubmitToServer,this,"Warning!\nTurning this setting on will send monster drop data along with your IP address to an external server.\n\nAre you sure you want to enable this setting?"),[2]}))}))},t.prototype.handlePluginEnableDisable=function(t){this.isPluginEnabled=t},t.prototype.handleSubmitToServer=function(t){this.submitItemsToServer=t},t.prototype.handle=function(t,e){if(!1!==this.isPluginEnabled&&!1!==NETWORK.loggedIn){if("spawnObject"!=t||"combat"!=e.type||e.participant1!=PLAYER.id&&e.participant2!=PLAYER.id||(this.monsterData.layer=e.location.position.layer,this.monsterData.x=e.location.position.x,this.monsterData.y=e.location.position.y,this.curCombat=GAME.combats[e.id],this.curCombat.left.id!=PLAYER.id?this.curEnemy=this.curCombat.left:this.curEnemy=this.curCombat.right,this.monsterData.Monster_Name=this.curEnemy.info.name,this.monsterData.Monster_Level=this.curEnemy.info.level),"projectile"==t&&e.source==PLAYER.id&&(this.curEnemy=GAME.npcs[e.target],this.monsterData.layer=PLAYER.location.layer,this.monsterData.x=this.curEnemy.pos2.x,this.monsterData.y=this.curEnemy.pos2.y,this.monsterData.Monster_Name=this.curEnemy.info.name,this.monsterData.Monster_Level=this.curEnemy.info.level),"damage"==t&&e.id==this.curEnemy.id&&(this.monsterData.Monster_HP=e.maxhp),"xp"==t)switch(e.skill){case"vitality":this.enemyDead=e.timestamp,this.monsterData.vitXP=e.xp;break;case"attack":this.monsterData.atkXP=e.xp;break;case"strength":this.monsterData.strXP=e.xp;break;case"defense":this.monsterData.defXP=e.xp}if("spawnObject"==t&&"item"==e.type&&0!=this.enemyDead){if(void 0===this.curEnemy.pos2)return;var i=e.location.position.x,n=e.location.position.y,o=[this.curEnemy.pos2.x,this.curEnemy.pos2.x+1,this.curEnemy.pos2.x-1],r=[this.curEnemy.pos2.y,this.curEnemy.pos2.y+1,this.curEnemy.pos2.y-1];o.includes(i)&&r.includes(n)&&this.objectSpawns.push(e)}if("removeObject"==t&&e.id==this.curEnemy.id){var a={};for(var s in this.monsterData.Drops=[],this.objectSpawns)this.objectSpawns[s].timestamp<=e.timestamp&&(a.Item_Code=this.objectSpawns[s].item.item,void 0===this.objectSpawns[s].item.quantity?a.Item_Quantity=1:a.Item_Quantity=this.objectSpawns[s].item.quantity,this.monsterData.Drops.push(structuredClone(a)));0==this.monsterData.Drops.length&&(a.Item_Code="nothing",a.Item_Quantity=1,this.monsterData.Drops.push(structuredClone(a))),this.monsterData.playerCL=PLAYER.character.combatLevel,this.monsterData.meleeTot=PLAYER_INFO.skills.attack.level+PLAYER_INFO.skills.strength.level+PLAYER_INFO.skills.defense.level,this.objectSpawns=[],this.enemyDead=0,!0===this.submitItemsToServer&&window.genlite.sendDataToServer("droplogproject",this.monsterData),this.localDropRecording()}}},t.prototype.loginOK=function(){for(var t in GAME.combats){var e=GAME.combats[t];e.left.id==PLAYER.id?(this.curCombat=e,this.curEnemy=e.right):e.right.id==PLAYER.id&&(this.curCombat=e,this.curEnemy=e.left);break}void 0!==this.curCombat&&(this.monsterData.layer=this.monsterData.layer=PLAYER.location.layer,this.monsterData.x=this.curEnemy.pos2.x,this.monsterData.y=this.curEnemy.pos2.y,this.monsterData.Monster_Name=this.curEnemy.info.name,this.monsterData.Monster_Level=this.curEnemy.info.level)},t.prototype.localDropRecording=function(){var t=String.prototype.concat(this.monsterData.Monster_Name,"-",this.monsterData.Monster_Level);for(var e in void 0===this.dropTable[t]&&(this.dropTable[t]={},this.dropTable[t].Monster_Name=this.monsterData.Monster_Name,this.dropTable[t].Monster_Level=this.monsterData.Monster_Level,this.dropTable[t].Num_Killed=0,this.dropTable[t].location=[],this.dropTable[t].drops={}),this.dropTable[t].Num_Killed++,this.dropTable[t].location.push({layer:this.monsterData.layer,x:this.monsterData.x,y:this.monsterData.y}),this.monsterData.Drops){var i=this.monsterData.Drops[e];void 0===this.dropTable[t].drops[i.Item_Code]&&(this.dropTable[t].drops[i.Item_Code]=0),this.dropTable[t].drops[i.Item_Code]+=i.Item_Quantity,localStorage.setItem("genliteDropTable",JSON.stringify(this.dropTable))}},t.pluginName="GenLiteDropRecorderPlugin",t}();e.GenliteDropRecorderPlugin=o},727:function(t,e){"use strict";var i=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GenliteHitRecorder=void 0;var o=function(){function t(){this.isPluginEnabled=!1,this.curEnemy=null,this.statsList={aim:0,power:0,attack:0,strength:0,ranged:0},this.playerHitInfo={},this.playerHitInfo.hitList={},this.playerHitInfo.consecutiveZero=0,this.playerHitInfo.consecutiveNonZero=0,this.playerHitInfo.maxZero=0,this.playerHitInfo.maxNonZero=0,this.enemyHitInfo={},this.enemyHitInfo.hitList={},this.enemyHitInfo.consecutiveZero=0,this.enemyHitInfo.consecutiveNonZero=0,this.enemyHitInfo.maxZero=0,this.enemyHitInfo.maxNonZero=0,this.curDpsAcc={timeStart:0,doUpdate:1,totDam:0},this.cumDpsAcc={timeStart:0,totDam:0},this.isUIinit=!1,this.dpsOverlayContainer=document.createElement("div"),this.dpsOverlay=document.createElement("div")}return t.prototype.init=function(){return i(this,void 0,void 0,(function(){return n(this,(function(t){return window.genlite.registerModule(this),this.isPluginEnabled=window.genlite.settings.add("HitRecorder.Enable",!0,"Hit Recorder","checkbox",this.handlePluginEnableDisable,this),this.dpsOverlayContainer.appendChild(this.dpsOverlay),[2]}))}))},t.prototype.handlePluginEnableDisable=function(t){var e=this;this.isPluginEnabled=t,t?(this.isUIinit||this.initDpsElements(),void 0===this.dpsUiUpdateInterval&&(this.dpsUiUpdateInterval=setInterval((function(){e.updateDpsUI()}),100)),this.dpsOverlayContainer.style.visibility="visible"):(this.dpsOverlayContainer.style.visibility="hidden",this.dpsOverlay.style.visibility="hidden",clearInterval(this.dpsUiUpdateInterval),this.dpsUiUpdateInterval=void 0)},t.prototype.handle=function(t,e){var i,n;if(!1!==this.isPluginEnabled){if("spawnObject"==t&&"combat"==e.type&&(e.participant1==PLAYER.id||e.participant2==PLAYER.id)){var o=void 0;o=GAME.combats[e.id].left.id!=PLAYER.id?GAME.combats[e.id].left:GAME.combats[e.id].right,(this.curEnemy?this.curEnemy.id:0)!=o.id&&(this.curDpsAcc.timeStart=Date.now(),this.curDpsAcc.totDam=0,this.curDpsAcc.doUpdate=1,0==this.cumDpsAcc.timeStart&&(this.cumDpsAcc.timeStart=this.curDpsAcc.timeStart)),this.curEnemy=o}if("projectile"==t&&e.source==PLAYER.id)(this.curEnemy?this.curEnemy.id:0)!=e.target&&(this.curDpsAcc.timeStart=Date.now(),this.curDpsAcc.totDam=0,this.curDpsAcc.doUpdate=1,0==this.cumDpsAcc.timeStart&&(this.cumDpsAcc.timeStart=this.curDpsAcc.timeStart)),this.curEnemy=GAME.npcs[e.target],this.recordDamage(this.playerHitInfo,e.damage),this.curDpsAcc.totDam+=e.damage,this.cumDpsAcc.totDam+=e.damage;if("damage"==t&&null!=this.curEnemy&&e.id==this.curEnemy.id&&"melee"==e.style?(this.recordDamage(this.playerHitInfo,e.amount),this.curDpsAcc.totDam+=e.amount,0!=this.cumDpsAcc.timeStart&&(this.cumDpsAcc.totDam+=e.amount)):"damage"==t&&null!=this.curEnemy&&e.id==PLAYER.id&&this.recordDamage(this.enemyHitInfo,e.amount),"removeObject"==t&&this.curEnemy&&e.id==this.curEnemy.id&&(this.curDpsAcc.doUpdate=-1),"combatUI"==t)switch(void 0!==PLAYER_INFO&&(this.statsList.attack=PLAYER_INFO.skills.attack.level,this.statsList.strength=PLAYER_INFO.skills.strength.level,this.statsList.ranged=PLAYER_INFO.skills.ranged.level),this.statsList.aim=null!==(i=e.equipment.stats.aim)&&void 0!==i?i:e.equipment.stats.ranged_aim,this.statsList.power=null!==(n=e.equipment.stats.power)&&void 0!==n?n:e.equipment.stats.ranged_power,e.stance){case"controlled":this.statsList.attack+=1,this.statsList.strength+=1;break;case"accurate":this.statsList.attack+=3;break;case"aggressive":this.statsList.strength+=3;break;case"ranged_offensive":this.statsList.ranged+=3;break;case"ranged_defensive":this.statsList.ranged+=2}}},t.prototype.initializeUI=function(){this.isPluginEnabled&&(this.statsList.attack=PLAYER_INFO.skills.attack.level,this.statsList.strength=PLAYER_INFO.skills.strength.level,this.statsList.ranged=PLAYER_INFO.skills.ranged.level,this.initDpsElements())},t.prototype.recordDamage=function(t,e){0==e?(t.consecutiveNonZero>t.maxNonZero&&(t.maxNonZero=t.consecutiveNonZero),t.consecutiveNonZero=0,t.consecutiveZero++):(t.consecutiveZero>t.maxZero&&(t.maxZero=t.consecutiveZero),t.consecutiveZero=0,t.consecutiveNonZero++),void 0===t.hitList[e]&&(t.hitList[e]=0),t.hitList[e]++},t.prototype.initDpsElements=function(){var t=this,e=this.dpsOverlayContainer.style;e.setProperty("--left","1.3"),e.setProperty("--top","0.8"),e.left="calc( var(--left) * var(--profile-pic-height) * var(--hud-ui-zoom-factor) )",e.top="calc( var(--top) * var(--profile-pic-height) * var(--hud-ui-zoom-factor) )",e=this.dpsOverlay.style,this.dpsOverlay.classList.add("new_ux-level-1"),this.dpsOverlay.classList.add("new_ux-color-ui"),this.dpsOverlay.id="GenliteDpsOverlay",e.top="23px",e.setProperty("--width","1.3"),e.setProperty("--height","0.6"),e.width="calc( var(--width) * var(--profile-pic-height) * var(--hud-ui-zoom-factor) )",e.height="calc( var(--height) * var(--profile-pic-height) * var(--hud-ui-zoom-factor) )",e.backgroundColor="#331101",e.backgroundSize="cover",e.display="flex",e.flexDirection="column",e.justifyContent="space-evenly",e.borderRadius="20px",e.visibility="hidden",this.dpsOverlay.onclick=function(e){t.resetCumDps(e)};for(var i=0;i<2;i++){var n=document.createElement("div");n.id="GenliteDpsText".concat(i),n.style.paddingLeft="5%",n.style.paddingRight="5%",n.style.display="flex",n.style.justifyContent="space-between",n.style.color="#DAA520",n.style.position="relative";for(var o=0;o<2;o++){var r=document.createElement("span");r.style.position="relative",r.style.fontSize="smaller",r.style.fontFamily="ui-monospaced",r.classList.add("GenliteDpsText"),r.innerHTML="Samual is a nerd",n.appendChild(r)}this.dpsOverlay.appendChild(n)}var a=document.createElement("div");e=a.style,a.innerHTML="dps",e.width="40px",e.fontSize="70%",e.backgroundColor="#5D2309",e.backgroundSize="cover",e.color="white",e.fontFamily="ui-monospaced",e.justifyContent="center",e.display="flex",e.textShadow="-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000",e.borderRadius="7px",a.onclick=function(e){t.toggleDpsOverlay()},this.dpsOverlayContainer.insertBefore(a,this.dpsOverlay),document.getElementById("new_ux-player-hud-anchor").appendChild(this.dpsOverlayContainer),this.dpsUiUpdateInterval=setInterval((function(){t.updateDpsUI()}),100),this.isUIinit=!0},t.prototype.toggleDpsOverlay=function(){"hidden"==this.dpsOverlay.style.visibility?this.dpsOverlay.style.visibility="visible":this.dpsOverlay.style.visibility="hidden"},t.prototype.updateDpsUI=function(){var t=this.dpsOverlay.children[0],e=this.dpsOverlay.children[1],i=Date.now(),n=Math.round(this.curDpsAcc.totDam/((i-this.curDpsAcc.timeStart)/1e3)*100)/100,o=Math.round(this.cumDpsAcc.totDam/((i-this.cumDpsAcc.timeStart)/1e3)*100)/100;switch(this.curDpsAcc.doUpdate){case-1:this.curDpsAcc.doUpdate=0;case 1:t.children[0].innerHTML="Current DPS:",t.children[1].innerHTML=n.toLocaleString("en-US")}e.children[0].innerHTML="Cumulative DPS:",e.children[1].innerHTML=o.toLocaleString("en-US")},t.prototype.resetCumDps=function(t){t.shiftKey&&(this.cumDpsAcc={timeStart:0,totDam:0})},t.pluginName="GenliteHitRecorder",t}();e.GenliteHitRecorder=o},160:function(t,e){"use strict";var i=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GenLiteItemHighlightPlugin=void 0;var o=function(){function t(){this.trackedItems={},this.itemData={},this.item_highlight_div=null,this.render=!1,this.isAltDown=!1,this.styleRuleIndex=-1,this.isPluginEnabled=!1}return t.prototype.init=function(){return i(this,void 0,void 0,(function(){var t,e,i;return n(this,(function(n){return window.genlite.registerModule(this),this.originalItemIntersects=WorldItem.prototype.intersects,null!==(t=localStorage.getItem("genliteItemData"))&&(this.itemData=JSON.parse(t)),this.item_highlight_div=document.createElement("div"),this.item_highlight_div.className="item-indicators-list",document.body.appendChild(this.item_highlight_div),this.isPluginEnabled=window.genlite.settings.add("ItemHighlight.Enable",!0,"Highlight Items","checkbox",this.handlePluginEnableDisable,this),e=window.genlite.settings.add("ItemHighlight.PriorityColor","#ffa500","Priority Item Color","color",this.handleColorChange,this),i=document.styleSheets[0],this.styleRuleIndex=i.insertRule(".genlite-priority-item { color: ".concat(e,"; }"),i.cssRules.length),window.addEventListener("keydown",this.keyDownHandler.bind(this)),window.addEventListener("keyup",this.keyUpHandler.bind(this)),window.addEventListener("blur",this.blurHandler.bind(this)),!0===this.isPluginEnabled&&(WorldItem.prototype.intersects=this.worlditem_intersects_priority),[2]}))}))},t.prototype.keyDownHandler=function(t){"Alt"===t.key&&(t.preventDefault(),t.repeat||(this.isAltDown=!0,this.setDisplayState("inline-block")))},t.prototype.keyUpHandler=function(t){"Alt"===t.key&&(t.preventDefault(),this.isAltDown=!1,this.setDisplayState("none"))},t.prototype.blurHandler=function(){this.isAltDown=!1,this.setDisplayState("none")},t.prototype.handlePluginEnableDisable=function(t){!1===t?(this.item_highlight_div.innerHTML="",this.trackedItems={},WorldItem.prototype.intersects=this.originalItemIntersects):WorldItem.prototype.intersects=this.worlditem_intersects_priority,this.isPluginEnabled=t},t.prototype.handleColorChange=function(t){document.styleSheets[0].cssRules[this.styleRuleIndex].style.color=t},t.prototype.update=function(t){var e=this;if(!1!==this.isPluginEnabled&&0!=this.render){var i={},n=Object.keys(GAME.items).filter((function(t){return!Object.keys(e.trackedItems).includes(t)})),o=Object.keys(this.trackedItems).filter((function(t){return!Object.keys(GAME.items).includes(t)}));for(var r in n)this.trackedItems[n[r]]=this.create_text_element(n[r],GAME.items[n[r]]);for(var r in o)this.trackedItems[o[r]].remove(),delete this.trackedItems[o[r]];for(var r in this.trackedItems)if(void 0!==GAME.items[r]){if(-1==this.get_item_data(GAME.items[r].definition.item)&&!this.isAltDown){this.trackedItems[r].style.visibility="hidden";continue}var a=GAME.items[r].pos2.x+","+GAME.items[r].pos2.y;void 0===i[a]&&(i[a]=0);var s=(new THREE.Vector3).copy(GAME.items[r].position());s.y+=.5;var l=this.world_to_screen(s,i[a]);l.z>1?this.trackedItems[r].style.visibility="hidden":this.trackedItems[r].style.visibility="visible",this.trackedItems[r].style.left=l.x+"px",this.trackedItems[r].style.top=l.y+"px",i[a]++}}},t.prototype.loginOK=function(){this.render=!0},t.prototype.logoutOK=function(){this.item_highlight_div.innerHTML="",this.trackedItems={},this.render=!1},t.prototype.world_to_screen=function(t,e){var i=t.project(GRAPHICS.threeCamera());return i.x=(i.x+1)/2*window.innerWidth,i.y=-(i.y-1)/2*window.innerHeight-15*e,i},t.prototype.getItemValue=function(t){var e,i,n=t.definition.item,o=null!==(e=t.definition.quantity)&&void 0!==e?e:1;return n.startsWith("$scrip-")&&(n=n.substring(7),o*=5),(null!==(i=DATA.items[n].value)&&void 0!==i?i:1)*o},t.prototype.getItemColor=function(t){var e=this.get_item_data(t.definition.item);if(-1==e)return"spell-locked";if(1==e)return"genlite-priority-item";var i=this.getItemValue(t);return i>=1e4?"text-ran":i>=5e3?"text-purple":i>=1e3?"text-magenta":i>=500?"text-gold":i>=100?"text-limegreen":"text-white"},t.prototype.create_text_element=function(e,i){var n,o=document.createElement("div"),r=i.definition.item,a=!1;r.startsWith("$scrip-")?(r=r.substring(7),a=!0):a=null!==(n=DATA.items[r].stackable)&&void 0!==n&&n,o.className=this.getItemColor(i),o.style.position="absolute";var s=i.item_name;return!0===a&&(s="".concat(i.item_name,"(").concat(i.definition.quantity,")")),o.innerHTML='<span style="display: inline-block;">'.concat(s,'</span>\n                             <div class="genlite-item-setting" style="display: ').concat(this.isAltDown?"inline-block":"none",'; pointer-events: auto;" onclick="window.').concat(t.pluginName,".hide_item('").concat(r,'\');void(0);"> &#8863;</div>\n                             <div class="genlite-item-setting" style="display: ').concat(this.isAltDown?"inline-block":"none",'; pointer-events: auto;" onclick="window.').concat(t.pluginName,".important_item('").concat(r,"');void(0);\"> &#8862;</div>"),o.style.transform="translateX(-50%)",o.style.pointerEvents="none",o.style.textShadow="-1px -1px 0 #000,0   -1px 0 #000, 1px -1px 0 #000, 1px  0   0 #000, 1px  1px 0 #000, 0    1px 0 #000, -1px  1px 0 #000, -1px  0   0 #000",this.item_highlight_div.appendChild(o),o},t.prototype.hide_item=function(t){this.itemData.hasOwnProperty(t)||(this.itemData[t]=0),-1!=this.itemData[t]?this.itemData[t]=-1:this.itemData[t]=0,this.save_item_list()},t.prototype.important_item=function(t){this.itemData.hasOwnProperty(t)||(this.itemData[t]=0),1!=this.itemData[t]?this.itemData[t]=1:this.itemData[t]=0,this.save_item_list()},t.prototype.worlditem_intersects_priority=function(e,i){var n=this,o=e.intersectObject(n.sprite);o&&0!=o.length&&(i.push({color:"green",distance:o.distance,priority:-1,object:n,text:"Examine",action:function(){return CHAT.addGameMessage(n.item_examine)}}),i.push({color:"red",distance:o.distance,priority:1+50*window[t.pluginName].get_item_data(n.definition.item),object:n,text:"Take",action:function(){return NETWORK.action("take",{item:n.id})}}))},t.prototype.get_item_data=function(t){return this.itemData.hasOwnProperty(t)?this.itemData[t]:0},t.prototype.save_item_list=function(){this.item_highlight_div.innerHTML="",this.trackedItems={},localStorage.setItem("genliteItemData",JSON.stringify(this.itemData))},t.prototype.setDisplayState=function(t){document.querySelectorAll(".genlite-item-setting").forEach((function(e){e.style.display=t}))},t.pluginName="GenLiteItemHighlightPlugin",t}();e.GenLiteItemHighlightPlugin=o},410:function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GenLiteLocationsPlugin=void 0;var r=function(){function t(){var t=this;this.classifyPoint=i(367),this.minimapCompassClick=function(){console.log(t.mapOpen),t.mapOpen?t.hideMap():t.showMap()},this.minimapCompassMouseOver=function(){t.hoverMap()},this.minimapCompassMouseOut=function(){t.mapOpen||t.hideMap()},this.setupLocations(),this.setupLocationLabel(),this.setupMapIframe()}return t.prototype.init=function(){return n(this,void 0,void 0,(function(){return o(this,(function(t){return window.genlite.registerModule(this),this.isPluginEnabled=window.genlite.settings.add("LocationLabels.Enable",!0,"Location Labels","checkbox",this.handlePluginEnableDisable,this),this.showCoordinates=window.genlite.settings.add("LocationLabelCoordinates.Enable",!0,"Coordinates","checkbox",this.handleShowCoordinatesDisable,this),[2]}))}))},t.prototype.setupLocations=function(){this.lastPosition=[0,0],this.currentLocation=[[0,0]],this.currentLocationLabel="",this.currentSubLocation="",this.mainLocations={"Town of Skal":{polygon:[[]],subLocations:{}},Cent:{polygon:[[54,64],[85,58],[126,56],[125,128],[28,127],[-18,101],[-18,91],[-1,64],[54,64]],subLocations:{"Cent Anvil":[[98,89],[100,89],[100,92],[98,92],[98,89]],"Wolfgang's Sheepfold":[[100,59],[112,59],[112,70],[109,73],[101,73],[101,65],[100,64],[100,59]],"Jax Butchery":[[111,96],[115,96],[115,98],[111,98]],"Kordan's Armoury":[[109,92],[111,92],[111,96],[109,96]],"Fern's General Store":[[97,93],[100,93],[100,95],[99,96],[97,96],[97,99],[95,99],[95,96],[97,94]],Tutorial:[[91,104],[97,104],[98,105],[99,105],[100,104],[103,104],[103,101],[120,101],[120,102],[121,103],[120,110],[120,111],[119,112],[120,113],[120,119],[118,121],[118,123],[116,125],[111,125],[110,124],[109,124],[109,122],[99,122],[96,119],[92,119],[92,113],[91,112],[91,104]]}},Zamok:{polygon:[[26,-13],[-5,20],[-5,40],[1,47],[1,49],[4,51],[7,52],[14,59],[14,61],[16,62],[21,62],[22,61],[32,61],[33,62],[39,62],[44,56],[53,61],[62,54],[68,57],[84,55],[99,40],[95,7],[68,10],[67,0],[67,-9],[63,-13],[26,-13]],subLocations:{"Zamok Bank":[[78,24],[83,24],[83,29],[78,29],[78,24]],"Oberon's Armour Shop":[[85,19],[88,19],[85,19],[85,23],[88,23]],"Remmy's Pottery":[[90,23],[93,23],[93,26],[90,26],[90,23]],"Zarchery's Investation":[[80,34],[80,37],[83,37],[83,34],[80,34]],"Helena's Kitchen":[[89,36],[89,39],[92,39],[92,36],[89,36]],"Tom's Tanery":[[88,41],[88,44],[91,44],[91,41],[88,41]],"Zamok Mine":[[82,15],[81,12],[75,12],[72,14],[77,21],[82,15]],"Zamok Castle":[[42,15],[49,15],[52,13],[56,16],[62,16],[68,11],[75,22],[75,56],[68,57],[63,54],[54,60],[47,56],[42,55],[42,15]]}},Coyn:{polygon:[[200,150],[270,160],[289,242],[174,235]]},"Kosten Ridge":{polygon:[[247,-76],[295,-110],[490,-112],[509,215],[472,254],[342,254],[290,221],[247,-76]],subLocations:{}},"Paridot Plains":{},Thralltown:{polygon:[[]]},Plenty:{polygon:[[137,169],[141,165],[165,165],[173,173],[173,175],[177,179],[179,179],[188,188],[198,188],[192,196],[180,199],[177,209],[173,209],[173,213],[178,213],[178,223],[160,223],[147,221],[147,218],[146,217],[146,214],[147,213],[147,209],[143,205],[139,205],[137,203],[132,203],[131,204],[122,204],[120,202],[120,196],[119,195],[119,189],[122,186],[122,181],[124,179],[134,179],[137,176],[137,169]]},"Emerald City":{polygon:[[-55,382],[-8,382],[-8,336],[-55,336],[-55,382]]},"Dark Forest":{polygon:[[-185,332],[-186,340],[-190,347],[-189,367],[-179,370],[-171,380],[-149,380],[-130,377],[-129,370],[-97,382],[-100,354],[-121,337],[-162,316],[-185,332]]},Skal:{polygon:[]},Milltown:{polygon:[]}},this.dungeonLocations={"Reka Dungeon":{polygon:[[18,-70],[-66,-70],[-66,-23],[18,-23],[18,-70]],subLocations:{"Reka Baby Fire Elementals":[[-2,-59],[-2,-57],[3,-57],[6,-54],[9,-54],[9,-52],[11,-50],[14,-50],[14,-61],[6,-61],[4,-59],[-2,-59]]}},"Tutorial Dungeon":{polygon:[[77,73],[130,73],[130,124],[82,125],[77,73]]}},this.regionLocations={"Reka Valley":[[-128,-128],[209,-128],[211,6],[197,21],[190,65],[198,95],[187,129],[201,155],[196,194],[178,228],[157,237],[156,255],[-61,274],[-116,217],[-92,148],[-17,109],[-3,-2],[-58,-12],[-71,-26],[-74,-54],[-128,-58],[-128,-128]],"":[[]]}},t.prototype.setupLocationLabel=function(){this.locationLabel=document.createElement("div"),this.locationLabel.className="location_label",this.locationLabel.innerText="",this.locationLabel.style.cssText="\n            font-size: 2em;\n            color: yellow;\n            position: absolute;\n            left: 50vw;\n            top: 1em;\n            transform: translate(-50%, -50%);\n            display: none;\n            visibility: hidden;\n            pointer-events: none;\n        ",document.body.appendChild(this.locationLabel)},t.prototype.updateMapIframeSrc=function(){var t=PLAYER.location.layer.includes("world")?PLAYER.location.layer.replace("world",""):PLAYER.location.layer;this.mapIframe.src="https://genfamap.com/".concat(t,"?location=true#").concat(PLAYER.character.pos2.x+.5,"_").concat(PLAYER.character.pos2.y-.5,"_").concat(this.mapZoom)},t.prototype.hoverMap=function(){this.updateMapIframeSrc(),this.mapIframe.style.cssText="\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            display: block;\n            visibility: visible;\n            opacity: .5;\n            width: 50vw;\n            min-height: 75vh;\n            \n            pointer-events: none;\n        ",this.mapIframe.style.zIndex="1"},t.prototype.hideMap=function(){this.mapOpen=!1,this.mapIframe.style.cssText="\n            display: none;\n            visibility: hidden;\n            opacity: 0.0;\n        "},t.prototype.showMap=function(){this.mapOpen=!0,this.updateMapIframeSrc(),this.mapIframe.style.cssText="\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            display: block;\n            visibility: visible;\n            opacity: 1;\n            width: 50vw;\n            min-height: 75vh;\n            \n            pointer-events: auto;\n        ",this.mapIframe.style.zIndex="1"},t.prototype.setupMapIframe=function(){this.mapZoom=.55,this.mapIframe=document.createElement("iframe"),this.mapIframe.style.cssText="\n            display: none;\n            visibility: hidden;\n            width: 50vw;\n            min-height: 75vh;\n  \n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n             opacity: 0.5;\n        ",this.mapIframe.style.zIndex="1",this.mapIframe.src="https://genfamap.com/?location=true#0_0_".concat(this.mapZoom),document.body.appendChild(this.mapIframe)},t.prototype.checkIsPluginEnabled=function(){this.isPluginEnabled?(this.enableLocationLabels(),this.enableMapIframe()):(this.disableLocationLabels(),this.disableMapIframe())},t.prototype.handlePluginEnableDisable=function(t){this.isPluginEnabled=t,this.checkIsPluginEnabled()},t.prototype.handleShowCoordinatesDisable=function(t){this.showCoordinates=t,this.locationCheck()},t.prototype.openMap=function(){var t=PLAYER.location.layer.includes("world")?PLAYER.location.layer.replace("world",""):PLAYER.location.layer;this.popupMap=window.open("https://genfamap.com/".concat(t,"?location=true#").concat(PLAYER.character.pos2.x,"_").concat(PLAYER.character.pos2.y,"_0.67"),"genfanad-map","width=800,height=600")},t.prototype.closeMap=function(){},t.prototype.setLocationLabelUnknown=function(){this.showCoordinates?this.locationLabel.innerText="(".concat(GAME.world.x,",").concat(GAME.world.y,")"):this.locationLabel.innerText=""},t.prototype.setLocationLabel=function(t){this.showCoordinates?this.locationLabel.innerText="".concat(t," (").concat(GAME.world.x,",").concat(GAME.world.y,")"):this.locationLabel.innerText="".concat(t)},t.prototype.checkSubLocation=function(t,e){for(var i in t)if(1!=this.classifyPoint(t[i],e))return this.setLocationLabel(i),this.currentLocation=t[i],this.currentLocationLabel=i,this.currentSubLocation=t[i],!0},t.prototype.checkRegionLocations=function(t,e){for(var i in t)if(1!=this.classifyPoint(t[i],e))return this.setLocationLabel(i),this.currentLocation=t[i],this.currentLocationLabel=i,this.currentSubLocation=t[i],!0},t.prototype.checkLocations=function(t,e){for(var i in t)if(1!=this.classifyPointOrPolygon(t[i],e))return this.currentLocation=t[i].polygon,this.currentLocationLabel=i,void 0!==t[i].subLocations&&this.checkSubLocation(t[i].subLocations,e)||this.setLocationLabel(i),!0;return this.checkRegionLocations(this.regionLocations,e)},t.prototype.classifyPointOrPolygon=function(t,e){return this.classifyPoint(void 0!==t.polygon?t.polygon:t,e)},t.prototype.startLocationCheck=function(t,e){if(t!=e){var i=void 0;switch(PLAYER.location.layer){case"dungeon":i=this.checkLocations(this.dungeonLocations,t);break;case"fae":this.setLocationLabel("Fae");break;default:i=this.checkLocations(this.mainLocations,t)}i||this.setLocationLabelUnknown()}this.lastPosition=t},t.prototype.locationCheck=function(){var t=[PLAYER.character.pos2.x,PLAYER.character.pos2.y];this.startLocationCheck(t,this.lastPosition),this.updateMapIframeSrc()},t.prototype.animationDetector=function(t){this.locationCheck()},t.prototype.loginOK=function(){this.isPluginEnabled&&(this.enableLocationLabels(),this.enableMapIframe(),this.locationCheck())},t.prototype.logoutOK=function(){this.isPluginEnabled&&(this.disableLocationLabels(),this.disableMapIframe())},t.prototype.enableMapIframe=function(){this.hideMap();var t=document.getElementById("new_ux-minimap-compass");t.addEventListener("click",this.minimapCompassClick),t.addEventListener("mouseover",this.minimapCompassMouseOver),t.addEventListener("mouseout",this.minimapCompassMouseOut)},t.prototype.disableMapIframe=function(){this.hideMap();var t=document.getElementById("new_ux-minimap-compass");t.removeEventListener("click",this.minimapCompassClick),t.removeEventListener("mouseover",this.minimapCompassMouseOver),t.removeEventListener("mouseout",this.minimapCompassMouseOut)},t.prototype.disableLocationLabels=function(){this.locationLabel.style.display="none",this.locationLabel.style.visibility="hidden",Object.defineProperty(PLAYER.character,"movement_animation",{set:function(t){}})},t.prototype.enableLocationLabels=function(){var t=this;this.locationLabel.style.display="block",this.locationLabel.style.visibility="visible",Object.defineProperty(PLAYER.character,"movement_animation",{set:function(e){t.animationDetector(e)}})},t.pluginName="GenLiteLocationsPlugin",t}();e.GenLiteLocationsPlugin=r},319:function(t,e){"use strict";var i=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GenliteMenuScaler=void 0;var o=function(){function t(){this.isPluginEnabled=!1}return t.prototype.init=function(){return i(this,void 0,void 0,(function(){return n(this,(function(t){return window.genlite.registerModule(this),this.scaleList={},this.isPluginEnabled=window.genlite.settings.add("MenuScaler.Enable",!0,"MenuScaler","checkbox",this.handlePluginEnableDisable,this),this.scaleList.rightClick=window.genlite.settings.add("MenuScalerRightCLick.1",!0,"Scale Right Click Menu","range",this.scaleRightClick,this,void 0,[["min","0.1"],["max","4"],["step","0.1"],["value","1"]]),[2]}))}))},t.prototype.handlePluginEnableDisable=function(t){this.isPluginEnabled=t;var e=document.getElementById("new_ux-contextual-menu-modal");e.style.transform=t?"scale(".concat(this.scaleList.rightClick,")"):""},t.prototype.scaleRightClick=function(t){(this.scaleList.rightClick=t,this.isPluginEnabled)&&(document.getElementById("new_ux-contextual-menu-modal").style.transform="scale(".concat(t,")"))},t.prototype.initializeUI=function(){this.isPluginEnabled&&(document.getElementById("new_ux-contextual-menu-modal").style.transform="scale(".concat(this.scaleList.rightClick,")"))},t.pluginName="GenliteMenuScaler",t}();e.GenliteMenuScaler=o},414:function(t,e){"use strict";var i=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GenLiteNPCHighlightPlugin=void 0;var o=function(){function t(){this.trackedNpcs={},this.npc_highlight_div=null,this.render=!1,this.npcHealthList={},this.isPluginEnabled=!1}return t.prototype.init=function(){return i(this,void 0,void 0,(function(){return n(this,(function(t){return window.genlite.registerModule(this),this.npc_highlight_div=document.createElement("div"),this.npc_highlight_div.className="npc-indicators-list",document.body.appendChild(this.npc_highlight_div),this.npcHealthList=JSON.parse(localStorage.getItem("GenliteNPCHealthList")),null==this.npcHealthList&&(this.npcHealthList={}),this.isPluginEnabled=window.genlite.settings.add("NpcHighlight.Enable",!0,"Highlight NPCs","checkbox",this.handlePluginEnableDisable,this),[2]}))}))},t.prototype.handlePluginEnableDisable=function(t){!1===t&&(this.npc_highlight_div.innerHTML="",this.trackedNpcs={}),this.isPluginEnabled=t},t.prototype.update=function(t){var e=this;if(!1!==this.isPluginEnabled&&!1!==this.render){var i=Object.keys(GAME.npcs).filter((function(t){return!Object.keys(e.trackedNpcs).includes(t)})),n=Object.keys(this.trackedNpcs).filter((function(t){return!Object.keys(GAME.npcs).includes(t)}));for(var o in i){var r=GAME.npcs[i[o]],a="".concat(r.info.name,"-").concat(r.info.level),s=r.htmlName;void 0!==this.npcHealthList[a]&&(s+=" HP: ".concat(this.npcHealthList[a])),this.trackedNpcs[i[o]]=this.create_text_element(i[o],s)}for(var o in n)this.trackedNpcs[n[o]].remove(),delete this.trackedNpcs[n[o]];for(var o in this.trackedNpcs)if(void 0!==GAME.npcs[o]){var l=(new THREE.Vector3).copy(GAME.npcs[o].position());l.y+=GAME.npcs[o].height;var c=this.world_to_screen(l);c.z>1?this.trackedNpcs[o].style.visibility="hidden":this.trackedNpcs[o].style.visibility="visible",this.trackedNpcs[o].style.left=c.x+"px",this.trackedNpcs[o].style.top=c.y+"px"}}},t.prototype.loginOK=function(){this.render=!0},t.prototype.logoutOK=function(){this.npc_highlight_div.innerHTML="",this.trackedNpcs={},this.render=!1},t.prototype.combatUpdate=function(t){if(!1!==this.isPluginEnabled){var e=GAME.objectById(t.id);if(t.id!=PLAYER.id&&void 0===GAME.players[t.id]&&void 0!==e){var i,n="".concat(e.info.name,"-").concat(e.info.level);for(var o in void 0===this.npcHealthList[n]&&(this.npcHealthList[n]=t.maxhp,localStorage.setItem("GenliteNPCHealthList",JSON.stringify(this.npcHealthList)),i=Object.keys(GAME.npcs).filter((function(t){return GAME.npcs[t].htmlName==e.htmlName}))),i){var r=i[o];this.trackedNpcs[r].innerHTML+=" HP: ".concat(this.npcHealthList[n])}this.trackedNpcs.hasOwnProperty(e.id)&&(this.trackedNpcs[e.id].innerHTML="<div>".concat(e.htmlName,"</div><div>HP: ").concat(t.hp,"/").concat(t.maxhp,"</div>"))}}},t.prototype.world_to_screen=function(t){var e=t.project(GRAPHICS.threeCamera());return e.x=(e.x+1)/2*window.innerWidth,e.y=-(e.y-1)/2*window.innerHeight,e},t.prototype.create_text_element=function(t,e){var i=document.createElement("div");return i.className="text-yellow",i.style.position="absolute",i.innerHTML=e,i.style.transform="translateX(-50%)",i.style.textShadow="-1px -1px 0 #000,0   -1px 0 #000, 1px -1px 0 #000, 1px  0   0 #000, 1px  1px 0 #000, 0    1px 0 #000, -1px  1px 0 #000, -1px  0   0 #000",i.style.pointerEvents="none",this.npc_highlight_div.appendChild(i),i},t.pluginName="GenLiteNPCHighlightPlugin",t}();e.GenLiteNPCHighlightPlugin=o},37:function(t,e){"use strict";var i=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GenLiteRecipeRecorderPlugin=void 0;var o=function(){function t(){this.isPluginEnabled=!1,this.crafting={isCrafting:!1,recipe:void 0,recipeName:void 0,prevInventory:void 0,prevVerb:void 0,stTime:0,resultsList:{}}}return t.prototype.init=function(){return i(this,void 0,void 0,(function(){var t;return n(this,(function(e){return window.genlite.registerModule(this),t=localStorage.getItem("GenliteRecipeRecorder"),this.crafting.resultsList=null==t?{}:JSON.parse(t),this.isPluginEnabled=window.genlite.settings.add("RecipeRecorder.Enable",!0,"Record Recipes","checkbox",this.handlePluginEnableDisable,this),[2]}))}))},t.prototype.handlePluginEnableDisable=function(t){this.isPluginEnabled=t},t.prototype.action=function(t,e){if(!1!==this.isPluginEnabled&&e.hasOwnProperty("action")&&e.action.hasOwnProperty("recipe")){for(var i in this.crafting.isCrafting=!0,this.crafting.recipe=e.action.recipe,this.crafting.prevInventory=INVENTORY.items,this.crafting.recipeName=e.action.recipe,e.action.params)this.crafting.recipeName=this.crafting.recipeName.concat("__",i,e.action.params[i]);void 0===this.crafting.resultsList[this.crafting.recipeName]&&(this.crafting.resultsList[this.crafting.recipeName]={input:{},output:{}})}},t.prototype.handle=function(t,e){if(!1!==this.isPluginEnabled){var i={};if(this.crafting.isCrafting&&(e.id==PLAYER.id||e.player==PLAYER.id||void 0===e.id&&void 0===e.player)){if("inventory"==t){if("inventory"==this.crafting.prevVerb){for(var n in this.crafting.prevInventory)void 0===i[this.crafting.prevInventory[n].item]&&(i[this.crafting.prevInventory[n].item]=0),void 0===this.crafting.prevInventory[n].quantity?i[this.crafting.prevInventory[n].item]+=1:i[this.crafting.prevInventory[n].item]+=this.crafting.prevInventory[n].quantity;for(var n in e)void 0===i[e[n].item]&&(i[e[n].item]=0),void 0===e[n].quantity?i[e[n].item]-=1:i[e[n].item]-=e[n].quantity;for(var n in i)i[n]<0?(void 0===this.crafting.resultsList[this.crafting.recipeName].output[n]&&(this.crafting.resultsList[this.crafting.recipeName].output[n]=0),this.crafting.resultsList[this.crafting.recipeName].output[n]-=i[n]):i[n]>0&&(void 0===this.crafting.resultsList[this.crafting.recipeName].input[n]&&(this.crafting.resultsList[this.crafting.recipeName].input[n]=0),this.crafting.resultsList[this.crafting.recipeName].input[n]+=i[n]);this.crafting.prevInventory=structuredClone(e),localStorage.setItem("GenliteRecipeRecorder",JSON.stringify(this.crafting.resultsList))}}else"animation"==t&&(e.anim?this.crafting.stTime=e.timestamp:this.crafting.stTime<e.timestamp&&0!=this.crafting.stTime&&(this.crafting.isCrafting=!1,this.crafting.stTime=0));this.crafting.prevVerb=t}}},t.prototype.resetResultsList=function(){this.crafting.resultsList={}},t.pluginName="GenLiteRecipeRecorderPlugin",t}();e.GenLiteRecipeRecorderPlugin=o},955:function(t,e){"use strict";var i=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GenLiteWikiDataCollectionPlugin=void 0;var o=function(){function t(){this.previously_seen=[],this.isPluginEnabled=!1}return t.prototype.init=function(){return i(this,void 0,void 0,(function(){return n(this,(function(t){return window.genlite.registerModule(this),this.isPluginEnabled=window.genlite.settings.add("WikiDataColl.Enable",!1,"Wiki Data collection(REMOTE SERVER)","checkbox",this.handlePluginEnableDisable,this,"Warning!\nTurning this setting on will send various pieces of data that benefit the wiki along with your IP address to an external server.\n\nAre you sure you want to enable this setting?"),[2]}))}))},t.prototype.handlePluginEnableDisable=function(t){this.isPluginEnabled=t},t.prototype.combatUpdate=function(t){if(this.isPluginEnabled){var e=GAME.objectById(t.id);if(t.id!=PLAYER.id&&void 0===GAME.players[t.id]&&e&&e.object&&void 0===this.previously_seen.find((function(i){return i.Name===e.info.name&&i.Level===e.info.level&&i.MaxHP===t.maxhp}))){var i={Monster_Name:e.info.name,Monster_Level:e.info.level,Monster_HP:t.maxhp};this.previously_seen.push(i),window.genlite.sendDataToServer("monsterdata",i)}}},t.pluginName="GenLiteWikiDataCollectionPlugin",t}();e.GenLiteWikiDataCollectionPlugin=o},943:function(t,e){"use strict";var i=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GenLiteXpCalculator=void 0;var o=function(){function t(){this.isPluginEnabled=!1,this.skillsList={vitality:{numActions:0,avgActionXP:0,actionsToNext:0,tsStart:0,startXP:0},attack:{},strength:{},defense:{},ranged:{},sorcery:{},cooking:{},forging:{},artistry:{},tailoring:{},whittling:{},evocation:{},survival:{},piety:{},logging:{},mining:{},botany:{},butchery:{},total:{numActions:0,avgActionXP:0,tsStart:0,startXP:0,gainedXP:0}},this.tracking_skill="",this.isHookInstalled=!1}return t.prototype.init=function(){return i(this,void 0,void 0,(function(){return n(this,(function(t){return window.genlite.registerModule(this),this.resetCalculatorAll(),this.isPluginEnabled=window.genlite.settings.add("XPCalculator.Enable",!0,"XP Calculator","checkbox",this.handlePluginEnableDisable,this),[2]}))}))},t.prototype.handlePluginEnableDisable=function(t){this.isPluginEnabled=t,this.resetCalculatorAll(),t&&(this.initializeUI(),this.updateSkills())},t.prototype.initializeUI=function(){var t=this;if(this.isPluginEnabled&&!this.isHookInstalled){for(var e=document.getElementsByClassName("new_ux-player-info-modal__modal__window--stats__skill__container"),i=document.getElementsByClassName("new_ux-player-info-modal__modal__window--stats__section__list__row")[1],n=0;n<18;n++){var o=e[n];o.onmouseenter=this.installEventHook(o.onmouseenter,this.onmouseenter,this),o.onmousedown=this.installEventHook(o.onmousedown,this.onmousedown,this)}i.onmouseenter=function(e){return t.totalLevelCalc(e,t)},i.onmousedown=function(e){return t.onmousedown(e,t)},i.onmousemove=e[0].onmousemove,i.onmouseleave=e[0].onmouseleave,this.isHookInstalled=!0}},t.prototype.updateXP=function(t){var e=this;this.isPluginEnabled&&[t.skill,"total"].forEach((function(i){var n=e.skillsList[i],o=n.avgActionXP;o*=n.numActions,o+=t.xp,n.numActions++,n.avgActionXP=o/n.numActions,"total"==i&&(n.gainedXP+=t.xp),"total"!=i&&(n.actionsToNext=Math.ceil(PLAYER_INFO.skills[i].tnl/n.avgActionXP)),0==n.tsStart&&(n.tsStart=Date.now(),"total"!=i&&(n.startXP=PLAYER_INFO.skills[i].xp-t.xp))}))},t.prototype.onmouseenter=function(t,e){if(e.isPluginEnabled){e.tracking_skill=PLAYER_INFO.tracking_skill.id;var i=document.getElementById("skill_status_popup"),n=PLAYER_INFO.skills[PLAYER_INFO.tracking_skill.id],o=e.skillsList[PLAYER_INFO.tracking_skill.id],r=0,a=Date.now()-o.tsStart;0!=o.tsStart&&(r=Math.round((n.xp-o.startXP)/(a/36e5)*10)/100);var s=Math.round(n.tnl/r)/10;i.innerHTML+="\n            <div>XP per Action: ".concat(Math.round(10*o.avgActionXP)/100,"</div>\n            <div>Action TNL: ").concat(o.actionsToNext,"</div>\n            <div>XP per hour: ").concat(r,"</div>\n            <div>Time To Level: ").concat(s,"</div>")}},t.prototype.onmousedown=function(t,e){if(e.isPluginEnabled)if(t.shiftKey&&t.ctrlKey)e.resetCalculatorAll(t);else if(t.shiftKey){var i=e.tracking_skill;e.resetCalculator(i,t)}},t.prototype.updateTooltip=function(){this.isPluginEnabled&&(PLAYER_INFO.tracking&&"total"!=this.tracking_skill?this.onmouseenter(null,this):PLAYER_INFO.tracking&&"total"==this.tracking_skill&&this.totalLevelCalc(null,this))},t.prototype.updateSkills=function(){if(this.isPluginEnabled&&0==this.skillsList.total.startXP)for(var t in this.skillsList)"total"!=t&&(this.skillsList.total.startXP+=PLAYER_INFO.skills[t].xp)},t.prototype.installEventHook=function(t,e,i){var n=t;if("function"!=typeof t)return function(t){e(t,i)};return function(t){n(t),e(t,i)}},t.prototype.totalLevelCalc=function(t,e){if(e.isPluginEnabled){PLAYER_INFO.tracking=!0,e.tracking_skill="total";var i=e.skillsList.total,n=document.getElementById("skill_status_popup"),o=(i.startXP+i.gainedXP)/10,r=0,a=Date.now()-i.tsStart;0!=i.tsStart&&(r=Math.round(i.gainedXP/(a/36e5)*10)/100),n.innerHTML="\n        <div>Total</div>\n        <div>Current XP: ".concat(o.toLocaleString("en-US"),"</div>\n        <div>Gained XP: ").concat((i.gainedXP/10).toLocaleString("en-US"),"</div>\n        <div>XP per Action: ").concat(Math.round(10*i.avgActionXP)/100,"</div>\n        <div>XP per hour: ").concat(r,"</div>\n        "),t&&(n.style.left=t.clientX+15+"px",n.style.top=t.clientY+15+"px",n.style.display="block")}},t.prototype.resetCalculator=function(t,e){void 0===e&&(e=null);var i={numActions:0,avgActionXP:0,actionsToNext:0,tsStart:0,startXP:0};if("total"==t){var n=this.skillsList.total.startXP+this.skillsList.total.gainedXP;return this.skillsList.total=i,this.skillsList.total.startXP=n,this.skillsList.total.gainedXP=0,void this.totalLevelCalc(e,this)}this.skillsList[t]=i,this.isHookInstalled&&PLAYER_INFO.updateTooltip()},t.prototype.resetCalculatorAll=function(t){for(var e in void 0===t&&(t=null),this.skillsList)this.resetCalculator(e,t)},t.pluginName="GenLiteXpCalculatorPlugin",t}();e.GenLiteXpCalculator=o}},e={};(function i(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,i),r.exports})(607)})();